{% extends "base.html" %}

{% block content %}
<div class="content-wrapper">
    <h1 class="library-title">{{ page_title }}</h1>

    <div class="search-form">
        <form action="{{ url_for('book_search') }}" method="GET">
            <input type="text" name="author" placeholder="Enter author name"
                   value="{{ request.args.get('author', '') }}">
            <button type="submit" class="form-button">Search</button>
        </form>
    </div>

    {% if books %}
    <table class="customTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Author</th>
            <th>Views</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for book in books %}
        <tr>
            <td>{{ book.id }}</td>
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.views }}</td>
            <td>
                <a href="{{ url_for('book_details', book_id=book.id) }}" class="view-link">View Details</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-books">No books found{% if request.args.get('author') %} for author "{{ request.args.get('author')
        }}"{% endif %}.</p>
    {% endif %}

    <div class="action-buttons">
        <a href="{{ url_for('get_books_form') }}" class="form-button">Add New Book</a>
    </div>
</div>
{% endblock %}